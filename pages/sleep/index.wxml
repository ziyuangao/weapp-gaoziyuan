<!-- pages/white-noise/index.wxml -->
<view class="page">

<!-- é¡µé¢ä¸»æ ‡é¢˜ -->
<view class="title-section">
  <text class="title">ğŸŒ™ ç™½å™ªéŸ³ Â· åŠ©çœ </text>
  <text class="subtitle">é€‰ä¸€ä¸ªå–œæ¬¢çš„å£°éŸ³ï¼Œå®‰å¿ƒå…¥ç¡</text>
</view>

<!-- Swiper å¡ç‰‡åŒº -->
<view class="swiper-section">
  <swiper
    class="card-swiper"
    indicator-dots="{{false}}"
    autoplay="{{false}}"
    circular="{{true}}"
    previous-margin="60rpx"
    next-margin="60rpx"
    bindchange="onSwiperChange"
    current="{{currentIndex}}"
  >
    <swiper-item wx:for="{{soundList}}" wx:key="id">
      <view class="sound-card {{index === currentIndex ? 'active' : ''}}">
        <text class="sound-title">{{item.name}}</text>
        <text class="sound-desc">{{item.desc}}</text>
      </view>
    </swiper-item>
  </swiper>
</view>

<!-- æ’­æ”¾æ§åˆ¶è¡Œ -->
<view class="control-row">
  <!-- æ’­æ”¾/æš‚åœæŒ‰é’® -->
  <button 
    class="play-btn {{isPlaying ? 'playing' : ''}}" 
    bindtap="onPlayToggle"
    disabled="{{!currentSound}}"
  >
    <text>{{isPlaying ? 'â¸ æš‚åœ' : 'â–¶ æ’­æ”¾'}}</text>
  </button>

  <!-- å®šæ—¶é€‰æ‹©å™¨ -->
  <view class="timer-picker">
    <picker 
      mode="selector" 
      range="{{timerOptions}}" 
      value="{{selectedTimerIndex}}"
      bindchange="onTimerChange"
      disabled="{{isTimerActive}}"
    >
      <view class="picker-display">
        <text class="picker-icon">â°</text>
        <text class="picker-text">{{timerDisplayText}}</text>
      </view>
    </picker>
  </view>

  <!-- ç¡®è®¤/å–æ¶ˆå®šæ—¶æŒ‰é’® -->
  <button 
    class="timer-confirm-btn {{isTimerActive ? 'active' : ''}}" 
    bindtap="onTimerConfirm"
    disabled="{{selectedTimerIndex === -1 && !isTimerActive}}"
  >
    <text>{{isTimerActive ? 'âœ• å–æ¶ˆå®šæ—¶' : 'âœ“ ç¡®è®¤'}}</text>
  </button>
</view>

<!-- å®šæ—¶çŠ¶æ€æ˜¾ç¤ºåŒºï¼ˆçº¯æ–‡å­—ï¼‰ -->
<view class="timer-status" wx:if="{{isTimerActive}}">
  <text class="timer-label">â³ å®šæ—¶å…³é—­</text>
  <text class="timer-remain">{{timerRemainText}}</text>
</view>

<!-- å½“å‰æ’­æ”¾çŠ¶æ€æç¤º -->
<view class="play-status">
  <text wx:if="{{isPlaying}}" class="status-text">ğŸµ æ­£åœ¨æ’­æ”¾ Â· {{currentSoundName}}</text>
  <text wx:elif="{{!isPlaying && currentSound}}" class="status-text paused">â¸ å·²æš‚åœ Â· {{currentSoundName}}</text>
  <text wx:else class="status-text idle">âœ¨ é€‰æ‹©ä¸€ä¸ªå£°éŸ³å¼€å§‹</text>
</view>

<!-- é¡µè„šè£…é¥°æ–‡å­— -->
<view class="footer">
  <text class="footer-text">æ„¿ä½ æœ‰å¥½æ¢¦ Â· æ™šå®‰</text>
</view>

</view>